{
  "hash": "1970cc03f21c94b8739bf6b37c13ac34",
  "result": {
    "markdown": "---\ntitle: \"Shapefiles in CDCPLACES 1.1.5\"\nauthor: \"Brenden Smith\"\ndate: \"2024-2-06\"\ncategories: [R, packages, API, vignette, maps]\ndescription: \"Map PLACES data with ease with the help of `tigris`.\"\nengine: knitr\nexecute: \n  warning: false\n  eval: true\n#image: vt.png\ncode-fold: show\ncode-overflow: scroll\ntoc: true\n---\n\n\n## Introduction\n\nWith the most recent development release of `CDCPLACES`, users can now request an sf data frame to allow for simple, streamlined mapping of PLACES data. To use this new feature, be sure to install the latest development version from GitHub.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install the latest development version\n# devtools::install_github(\"brendensm/CDCPLACES\")\n\nlibrary(CDCPLACES)\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n:::\n\n\n## New argument `geometry`\n\nFirst we need to query our data. To include our shape file, we need to specify the argument `geometry` as \"TRUE\". For our first example we will look at the percentage of adults sleeping less than 7 hours in Michigan Counties.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmi <- get_places(state = \"MI\", measure = \"SLEEP\", geometry = TRUE)\n```\n:::\n\n\nNow we can take this dataset and immediately plot the spatial data with `ggplot2`. I will also add a nicer looking color palette and the percentage scale in `scale_fill_viridis_c`, as well as a title with the function `labs`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmi |> \n  filter(datavaluetypeid == \"AgeAdjPrv\") |> \n  ggplot(aes(fill = data_value)) +\n  geom_sf() +\n  scale_fill_viridis_c(labels = scales::percent_format(scale = 1)) +\n  theme_minimal() +\n  labs(title = mi$measure) +\n  theme(plot.title.position = \"plot\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nWe can do the same for census level data. This is as simple as specifying our geography to \"census\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvt <- get_places(geo = \"census\", state = \"VT\", measure = \"SLEEP\", geometry = TRUE)\n```\n:::\n\n\nThen we can map it just the same.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvt |> \n  ggplot(aes(fill = data_value)) +\n  geom_sf() +\n  scale_fill_viridis_c(labels = scales::percent_format(scale = 1)) +\n  theme_minimal() +\n  labs(title = vt$measure) +\n  theme(plot.title.position = \"plot\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Acknowledgements\n\nThese features would not be possible without the excellent work of Kyle Walker's package `tigris`. The contributions he has made to the R community have been incredibly inspiring to me. His other package, `tidycensus` was the inspiration for this entire pacakge. To see his work visit his website [here.](https://walker-data.com/) \n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}